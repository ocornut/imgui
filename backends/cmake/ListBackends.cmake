
set(FOUND_BACKENDS "")
if (glfw3_FOUND AND OpenGL_FOUND)
    list(APPEND FOUND_BACKENDS "glfw_opengl2" "glfw_opengl3")
endif ()
if (glfw3_FOUND AND Vulkan_FOUND)
    list(APPEND FOUND_BACKENDS "glfw_vulkan")
endif ()
if (SDL2_FOUND AND NOT HAS_IMGUI_EMSCRIPTEN)
    list(APPEND FOUND_BACKENDS "sdl2_sdlrenderer2")
endif ()
if (SDL2_FOUND AND OpenGL_FOUND)
    list(APPEND FOUND_BACKENDS "sdl2_opengl2" "sdl2_opengl3")
endif ()
if (SDL2_FOUND AND Vulkan_FOUND)
    list(APPEND FOUND_BACKENDS "sdl2_vulkan")
endif ()
if (SDL3_FOUND AND OpenGL_FOUND)
    list(APPEND FOUND_BACKENDS "sdl3_opengl3")
endif ()
if (SDL3_FOUND AND NOT HAS_IMGUI_EMSCRIPTEN)
    list(APPEND FOUND_BACKENDS "sdl3_sdlgpu3" "sdl3_sdlrenderer3")
endif ()
if (SDL3_FOUND AND HAS_IMGUI_EMSCRIPTEN)
    list(APPEND FOUND_BACKENDS "sdl3_sdlrenderer3_emscripten")
endif ()
if (SDL3_FOUND AND Vulkan_FOUND)
    list(APPEND FOUND_BACKENDS "sdl3_vulkan")
endif ()
if (Allegro_FOUND)
    list(APPEND FOUND_BACKENDS "allegro5")
endif ()
if (HAS_IMGUI_GLUT AND OpenGL_FOUND)
    list(APPEND FOUND_BACKENDS "glut_opengl2")
endif ()
if (HAS_IMGUI_EMSCRIPTEN)
    list(APPEND FOUND_BACKENDS "glfw_wgpu_emscripten" "glfw_opengl3_emscripten" "sdl2_opengl3_emscripten" "sdl3_opengl3_emscripten")
endif ()
if (HAS_IMGUI_DAWN AND glfw3_FOUND)
    list(APPEND FOUND_BACKENDS "glfw_wgpu_dawn")
endif ()
if (HAS_IMGUI_EMSCRIPTEN AND glfw3_FOUND AND OpenGL_FOUND)
    list(APPEND FOUND_BACKENDS "glfw_web_opengl3")
endif ()
if (ANDROID_NDK)
    list(APPEND FOUND_BACKENDS "android_opengl3")
endif ()
if (HAS_IMGUI_DIRECTX_9_X86)
    list(APPEND FOUND_BACKENDS "win32_directx9")
endif ()
if (HAS_IMGUI_DIRECTX_10_X86)
    list(APPEND FOUND_BACKENDS "win32_directx10")
endif ()
if (HAS_IMGUI_DIRECTX_11_X86)
    list(APPEND FOUND_BACKENDS "win32_directx11")
endif ()
if (HAS_IMGUI_DIRECTX_12_X86)
    list(APPEND FOUND_BACKENDS "win32_directx12")
endif ()
if (HAS_IMGUI_DIRECTX_9_X64)
    list(APPEND FOUND_BACKENDS "win64_directx9")
endif ()
if (HAS_IMGUI_DIRECTX_10_X64)
    list(APPEND FOUND_BACKENDS "win64_directx10")
endif ()
if (HAS_IMGUI_DIRECTX_11_X64)
    list(APPEND FOUND_BACKENDS "win64_directx11")
endif ()
if (HAS_IMGUI_DIRECTX_12_X64)
    list(APPEND FOUND_BACKENDS "win64_directx12")
    endif ()
if (MSVC)
    if (OpenGL_FOUND)
        list(APPEND FOUND_BACKENDS "win32_opengl3")
    endif ()
    if (Vulkan_FOUND)
        list(APPEND FOUND_BACKENDS "win32_vulkan")
    endif ()
endif ()

set(SUPPORTED_BACKENDS ${FOUND_BACKENDS})
set(SUPPORTED_BACKENDS ${FOUND_BACKENDS} PARENT_SCOPE)
set(HAS_IMGUI_GLFW3 ${HAS_IMGUI_GLFW3} PARENT_SCOPE)
set(HAS_IMGUI_OPENGL ${HAS_IMGUI_OPENGL} PARENT_SCOPE)
set(HAS_IMGUI_SDL2 ${HAS_IMGUI_SDL2} PARENT_SCOPE)
set(HAS_IMGUI_SDL3 ${HAS_IMGUI_SDL3} PARENT_SCOPE)
set(HAS_IMGUI_VULKAN ${HAS_IMGUI_VULKAN} PARENT_SCOPE)
set(HAS_IMGUI_ALLEGRO ${HAS_IMGUI_ALLEGRO} PARENT_SCOPE)
set(HAS_IMGUI_GLUT ${HAS_IMGUI_GLUT} PARENT_SCOPE)
set(HAS_IMGUI_EMSCRIPTEN ${HAS_IMGUI_EMSCRIPTEN} PARENT_SCOPE)
set(HAS_IMGUI_DAWN ${HAS_IMGUI_DAWN} PARENT_SCOPE)
set(HAS_IMGUI_DIRECTX_9_X64 ${HAS_IMGUI_DIRECTX_9_X64} PARENT_SCOPE)
set(HAS_IMGUI_DIRECTX_9_X86 ${HAS_IMGUI_DIRECTX_9_X86} PARENT_SCOPE)
set(HAS_IMGUI_DIRECTX_10_X64 ${HAS_IMGUI_DIRECTX_10_X64} PARENT_SCOPE)
set(HAS_IMGUI_DIRECTX_10_X86 ${HAS_IMGUI_DIRECTX_10_X86} PARENT_SCOPE)
set(HAS_IMGUI_DIRECTX_11_X64 ${HAS_IMGUI_DIRECTX_11_X64} PARENT_SCOPE)
set(HAS_IMGUI_DIRECTX_11_X86 ${HAS_IMGUI_DIRECTX_11_X86} PARENT_SCOPE)
set(HAS_IMGUI_DIRECTX_12_X64 ${HAS_IMGUI_DIRECTX_12_X64} PARENT_SCOPE)
set(HAS_IMGUI_DIRECTX_12_X86 ${HAS_IMGUI_DIRECTX_12_X86} PARENT_SCOPE)
message(STATUS "Supported backends ${SUPPORTED_BACKENDS}")
